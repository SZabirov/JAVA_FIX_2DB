# Spring JdbcTemplate

* Неудобства класического JDBC

- Работа с низкоуровневым Connection
- Неудобство отправки запросов через Statements
- Неудобство получения результатов через ResultSet

## Spring

* Фреймворк - набор библиотек, jar-файлов

- Spring JDBC - удобные инструменты для работы с SQL базами данных
- Spring AOP - инструменты для работы с аспектно-ориентированным программированием (реализация сквозная логика)
- Spring Security - фреймворк для обеспечения безопасности web-приложения
- Spring MVC/WEB - фреймворк для создания веб-приложений
- Spring Data JPA - мощнейший инструмент для работы с базами данных разных типов.
- и т.д.

### Spring JDBC

* Классы-обертки над стандартным JDBC

* Никаких CheckedExceptions
* Реализованы базовые запросы через специальные шаблоны
* Удобные интерфейсы для конвертации SQL-строк в объекты.

### Подключение Spring JDBC

Необходимы следующие библиотеки:

* spring-jdbc - основная библиотека
* spring-context - основная библиотека для всех spring-библиотек

Подключение выполняем в pom.xml

## Работа с SpringJdbc

* DataSource - интерфейс, имплементации которго предоставляют подключение к бд.
* DriverManagerDataSource - стандартый DataSource, работающий через DriverManager.

## Реализация DAO на базе JdbcTemplate

* Реализация состоит из нескольких важных компонентов:

- поле JdbcTemplate, шаблонный класс, позволяет более удобно выполнять запросы без лишних действий.

- RowMapper - анонимная реализация интерфейса RowMapper для маппинга строк SQL в объекты java.

- методы CRUD которые мы реализуем

# MVC

MVC - паттерн проектирования

- Model - данные + логика
- View - представление
- Controller - контроллер, обрабатывает запросы, уводит их в Model, получает оттуда данные и кладет в View

В терминах Spring:
- Controller - это сервлет, который входит в инфраструктуру спринга
- View - например, Freemarker-шаблон, может быть что-то другое
- Model - в контексте Spring это атрибуты, вообще - это логика и данные.

## MVC в Spring

* Реализуется интерфейс Controller. Метод handleRequest обрабатывает запрос и возвращает объект ModelAndView
* Описываем Freemarker-шаблон
* Описываем модели, сервисы, dao и т.д.
* Создаем dispatcher-servlet-контекст
* В web.xml прописываем маппинг только на dispatcher-servlet

## Front Controller
Паттрен проектирования, суть - принимает ВСЕ запросы и делегирует их другим контроллерам

## Front Controller в Spring - DispatcherServlet

1. Запрос приходит на DispatcherServlet
2. DS обращается с этим запросом к HandlerMapping-у и получает контроллер, который должен обработать этот запрос.
3. DS передает запрос Controller-у, который возвращает объект ModelAndView, котрый содержит ViewName и данные (Model), которые необходимо отобразить на View
4. DS передает ViewName ViewResolver-у, ViewResolver возвращает View по заданному имени.
5. DS вставляет Model во View и возвращает как результат.

Чтобы DispatcherServlet мог принимать все запросы, необходимо описать его в Web.xml.

Поскольку, DispatcherServlet является компонентом Spring, нужно описать context этого сервлета.
Размещается вместе с web.xml и представляет собой обычный xml-контекст
